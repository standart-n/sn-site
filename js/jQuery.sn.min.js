(function($){var methods={init:function(options){return options||(options={}),def={bonus:{inputText:"Введите номер карты"},content:{},result:{}},$.extend(!0,def,options),this.each(function(){alert("go!"),$(this).data("sn",def),$(this).snEvents({href:"#autoload"})})}};$.fn.sn=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}})(jQuery),function($){var methods={init:function(){return this.each(function(){})},sendRequest:function(options){options||(options={});var def={type:"json",debug:!1,action:"build",card:""};$.extend(!0,def,options),def.debug&&(def.type="text");var sn=$(this).data("sn");$.ajax({url:"index.php",type:"POST",data:{action:def.action,card:def.card},dataType:def.type,timeout:1e4,beforeSend:function(){},success:function(s){sn.result=s,def.debug&&alert(s),$(this).data("sn",sn),$(this).snEvents({href:"#afterCheckCard"})},error:function(XMLHttpRequest,textStatus,error){$("#status").html(error).removeClass("loading")}})}};$.fn.snAjax=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(){return this.each(function(){$(this).snConf("main")})},main:function(){var sn=$(this).data("sn");$.ajax({url:"sn-project/settings/main.json",async:!1,dataType:"json",success:function(s){$.extend(!0,sn,s),$(this).data("sn",sn)}})}};$.fn.snConf=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(options){return this.each(function(){var def={href:"none"};$.extend(!0,def,options);var href=def.href;switch(href.replace(/(.*)#(.*)/,"$2")){case"autoload":var sn=$(this).data("sn");sn.bonus.inputText&&$("#bonus-area-input input").val(sn.bonus.inputText),$(this).snTriggers("bonusForm");break;case"checkCard":var card_val=$("#bonus-area-input input").val();alert(card_val);break;case"afterCheckCard":sn=$(this).data("sn");var rt=!1;sn.result&&sn.result.bonus&&void 0!==sn.result.bonus.exists&&($("#bonus-exists").html(sn.result.bonus.exists),$("#bonus-summ").show(),$("#bonus-fail").hide(),rt=!0),rt||($("#bonus-summ").hide(),$("#bonus-fail").show()),$("#bonus-response-outer").slideDown();break;case"close":$(this).hide()}})}};$.fn.snEvents=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery),function($){var methods={init:function(){return this.each(function(){})},bonusForm:function(){th=$(this),sn=$(this).data("sn"),$("#bonus-area-input input").on("focus",function(){$(this).removeClass("bonus-input-blur").addClass("bonus-input-focus").select(),sn.bonus.inputText&&$(this).val()==sn.bonus.inputText&&$(this).val("")}),$("#bonus-area-input input").on("blur",function(){$(this).removeClass("bonus-input-focus").addClass("bonus-input-blur"),sn.bonus.inputText&&""===$(this).val()&&$(this).val(sn.bonus.inputText)}),$("#bonus-link-check").on("click",function(e){e.preventDefault(),th.snEvents({href:"#checkCard"})}),$("#bonus-form").on("submit",function(e){e.preventDefault(),th.snEvents({href:"#checkCard"})})}};$.fn.snTriggers=function(sn){return sn||(sn={}),methods[sn]?methods[sn].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof sn&&sn?($.error("Метод "+sn+" не существует"),void 0):methods.init.apply(this,arguments)}}(jQuery);